# ============================================================================
# PPP-Q Development Docker Compose
# Lightweight setup for local development
# ============================================================================

services:
  # API Service (Development mode with hot reload)
  pppq-api:
    build:
      context: ..
      dockerfile: docker/Dockerfile
      target: development
    container_name: pppq-api-dev
    ports:
      - "8000:8000"
    volumes:
      - ../src:/app/src
      - ../models:/app/models
      - ../data/processed:/app/data/processed
      - ../tests:/app/tests
    environment:
      - MODEL_DIR=/app/models/pppq/
      - DATA_DIR=/app/data/processed/pppq/
      - LOG_LEVEL=DEBUG
      - PYTHONPATH=/app
    restart: unless-stopped

  # Redis for caching (optional for dev)
  redis:
    image: redis:7-alpine
    container_name: pppq-redis-dev
    ports:
      - "6379:6379"
    restart: unless-stopped
